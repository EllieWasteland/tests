<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente de Configuración Eduroam - UCuenca</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(180deg, #E6D9FF 0%, #F5EEFF 40%, #FFFFFF 100%);
            color: #1a1a1a;
            min-height: 100vh;
            overflow: hidden; /* Prevent body scroll */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #parallax-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            perspective: 1000px;
        }

        .layer {
             position: absolute;
             top:0; left:0; right:0; bottom:0;
             display: flex;
             align-items: center;
             justify-content: center;
             transition: transform 0.1s ease-out;
        }

        /* 4-point star SVG */
        .sparkle {
            position: absolute;
            width: 50px;
            height: 50px;
            color: #1a1a1a;
            opacity: 0;
            animation: fadeIn 1s ease-out 2.5s forwards;
        }
        .sparkle-1 { top: 15%; left: 5%; transform: rotate(15deg) scale(0.8); }
        .sparkle-2 { top: 25%; right: 10%; transform: rotate(-10deg); animation-delay: 2.7s; }
        .sparkle-3 { bottom: 20%; left: 20%; transform: rotate(25deg) scale(1.2); animation-delay: 2.9s;}

        /* --- 3D Floating Elements --- */
        .floating-element {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.5), rgba(255,255,255,0) 70%), rgba(128, 90, 213, 0.2);
            box-shadow: inset 0 0 20px rgba(255,255,255,0.3), 0 10px 25px rgba(0,0,0,0.1);
            animation: float 20s infinite ease-in-out;
        }

        #float1 { width: 200px; height: 200px; top: 10%; left: -5%; animation-duration: 25s;}
        #float2 { width: 150px; height: 150px; top: 70%; right: -3%; animation-duration: 30s; animation-delay: 5s;}
        #float3 { width: 80px; height: 80px; top: 80%; left: 10%; animation-duration: 18s; animation-delay: 2s;}
        #float4 { width: 120px; height: 120px; top: 5%; right: 25%; animation-duration: 22s; animation-delay: 8s;}

        /* --- Glass Pane Effect --- */
        .glass-pane {
            background: rgba(255, 255, 255, 0.35);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            height: 90vh;
            max-height: 700px;
            width: 90vw;
            max-width: 480px;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        .glass-pane.visible {
            opacity: 1;
            transform: scale(1);
        }

        /* --- Splash Screen --- */
        #splash-screen {
            transition: opacity 0.7s ease-out;
        }

        /* Animation Keyframes */
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { 0% { opacity: 0; transform: scale(0.5); } 80% { opacity: 1; transform: scale(1.1); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes float { 0% { transform: translateY(0) translateX(0) scale(1) rotate(0deg); } 25% { transform: translateY(-30px) translateX(20px) scale(1.1) rotate(20deg); } 50% { transform: translateY(20px) translateX(-30px) scale(0.9) rotate(-10deg); } 75% { transform: translateY(-10px) translateX(40px) scale(1) rotate(15deg); } 100% { transform: translateY(0) translateX(0) scale(1) rotate(0deg); } }

        .animated-item { opacity: 0; }
        .current .animated-item { animation: slideInUp 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        .current .animated-icon { animation: popIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }

        #steps-container { flex: 1; position: relative; overflow: hidden; }
        .step { width: 100%; height: 100%; position: absolute; top: 0; left: 0; display: flex; flex-direction: column; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .step.future { transform: translateX(100%); }
        .step.past { transform: translateX(-100%); }
        .step.current { transform: translateX(0); }
        .progress-bar-fill { transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="fixed inset-0 bg-[#F5EEFF] z-50 flex flex-col items-center justify-center">
        <div id="splash-content" class="text-center transition-opacity duration-500">
            <p id="splash-text" class="text-lg text-gray-600 mb-4">Detectando tu dispositivo...</p>
            <div id="os-logo-container" class="w-24 h-24 mx-auto opacity-0 scale-50 transition-all duration-500">
                <!-- OS Logo will be injected here -->
            </div>
        </div>
    </div>
    
    <div id="parallax-scene">
        <!-- Background Decorations -->
        <div class="layer" data-depth="0.3">
            <svg class="sparkle sparkle-1" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M27 0L32.226 21.774L54 27L32.226 32.226L27 54L21.774 32.226L0 27L21.774 21.774L27 0Z" fill="currentColor"/></svg>
        </div>
        <div class="layer" data-depth="0.2">
            <svg class="sparkle sparkle-2" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M27 0L32.226 21.774L54 27L32.226 32.226L27 54L21.774 32.226L0 27L21.774 21.774L27 0Z" fill="currentColor"/></svg>
        </div>
         <div class="layer" data-depth="0.4">
            <svg class="sparkle sparkle-3" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M27 0L32.226 21.774L54 27L32.226 32.226L27 54L21.774 32.226L0 27L21.774 21.774L27 0Z" fill="currentColor"/></svg>
        </div>
        <div class="layer" data-depth="0.2"><div id="float1" class="floating-element"></div></div>
        <div class="layer" data-depth="0.4"><div id="float2" class="floating-element"></div></div>
        <div class="layer" data-depth="-0.2"><div id="float3" class="floating-element"></div></div>
        <div class="layer" data-depth="0.3"><div id="float4" class="floating-element"></div></div>

        <!-- Main App Container -->
        <div class="layer" data-depth="-0.1">
            <div class="glass-pane">
                <div class="relative flex flex-col h-full w-full">

                    <!-- Progress Bar -->
                    <div class="p-4 sm:p-6 flex-shrink-0">
                        <div class="w-full bg-black/10 rounded-full h-2">
                            <div id="progress-bar" class="bg-gray-900 h-2 rounded-full progress-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>

                    <div id="steps-container">
                        
                        <!-- Step 0: OS Detection -->
                        <div id="step-0" class="step current">
                            <div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center items-center text-center">
                                <h1 class="text-5xl font-black mb-4 animated-item">¡Bienvenido!</h1>
                                <p class="text-lg text-gray-600 mb-6 animated-item" style="animation-delay: 100ms;">Este es el asistente de configuración de Eduroam.</p>
                                <div id="os-info" class="text-xl font-bold p-4 bg-black/5 rounded-lg mb-8 animated-item" style="animation-delay: 200ms;"></div>
                                <p class="text-sm text-gray-500 mb-4 animated-item" style="animation-delay: 300ms;">Si no es correcto, selecciona tu sistema:</p>
                                <div class="flex gap-4 animated-item" style="animation-delay: 400ms;">
                                    <button onclick="startGuide('Android')" class="bg-black text-white font-bold py-2 px-6 rounded-full hover:bg-gray-800 transition">Android</button>
                                    <button class="bg-black/5 text-gray-400 font-bold py-2 px-6 rounded-full cursor-not-allowed" disabled>iOS</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Other steps remain the same -->
                        <!-- Step 1: Welcome -->
                        <div id="step-1" class="step future"><div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center"><h2 class="text-sm font-semibold uppercase text-gray-500 animated-item">Asistente Vitrum x UCuenca</h2><h1 class="text-7xl font-black my-2 leading-none animated-item" style="animation-delay: 100ms;">Conéctate a</h1><h1 class="text-7xl font-black text-purple-600 animated-item" style="animation-delay: 200ms;">Eduroam</h1><p class="text-lg text-gray-600 mt-6 animated-item" style="animation-delay: 300ms;">Esta guía te ayudará en el proceso de configuración para acceder a la red Wi-Fi de la Universidad de Cuenca.</p></div></div>
                        <!-- Step 2: About Eduroam -->
                        <div id="step-2" class="step future"><div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center"><h1 class="text-5xl font-black mb-6 animated-item">¿Qué es Eduroam?</h1><p class="mb-8 text-gray-600 animated-item" style="animation-delay: 100ms;">Eduroam (Education Roaming) es un servicio mundial que ofrece acceso a internet seguro y universal en todas las instituciones afiliadas.</p><ul class="space-y-4"><li class="flex items-center animated-item" style="animation-delay: 200ms;"><svg class="w-6 h-6 mr-3 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Acceso global en universidades aliadas.</li><li class="flex items-center animated-item" style="animation-delay: 300ms;"><svg class="w-6 h-6 mr-3 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Conexión de alta velocidad y segura.</li><li class="flex items-center animated-item" style="animation-delay: 400ms;"><svg class="w-6 h-6 mr-3 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Una vez configurado, te conectarás automáticamente.</li></ul></div></div>
                        <!-- Step 3: Prepare to Install -->
                        <div id="step-3" class="step future"><div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center"><div class="flex items-center gap-4 mb-6"><svg class="w-12 h-12 text-purple-600 animated-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h1 class="text-5xl font-black animated-item" style="animation-delay: 100ms;">1. Prepárate</h1></div><p class="mb-4 text-gray-600 animated-item" style="animation-delay: 200ms;">Al final de la guía estará el enlace de instalación directa para tu dispositivo.</p><p class="mb-4 text-gray-600 animated-item" style="animation-delay: 300ms;">Se te guiará previamente cómo configurar la app eduroam y por ello es importante que prestes atención a todo el proceso de la guía.</p></div></div>
                        <!-- Step 4: Search University -->
                        <div id="step-4" class="step future"><div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center"><div class="flex items-center gap-4 mb-6"><svg class="w-12 h-12 text-purple-600 animated-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><h1 class="text-5xl font-black animated-item" style="animation-delay: 100ms;">2. Busca tu Institución</h1></div><p class="mb-6 text-gray-600 animated-item" style="animation-delay: 200ms;">Abre la app y en el campo de búsqueda, escribe y selecciona <span class="font-bold">"Universidad de Cuenca"</span>.</p><div class="bg-black/5 w-full h-48 rounded-xl flex items-center justify-center animated-item" style="animation-delay: 300ms;"><p class="text-gray-400">Aquí irá una imagen del paso</p></div></div></div>
                        <!-- Step 5: Credentials -->
                        <div id="step-5" class="step future"><div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center"><div class="flex items-center gap-4 mb-6"><svg class="w-12 h-12 text-green-600 animated-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg><h1 class="text-5xl font-black animated-item" style="animation-delay: 100ms;">3. Ingresa tus Datos</h1></div><p class="mb-6 text-gray-600 animated-item" style="animation-delay: 200ms;">Ingresa tu correo institucional y contraseña.</p><div class="space-y-4"><div class="bg-black/5 p-4 rounded-xl animated-item" style="animation-delay: 300ms;"><label class="text-sm text-gray-500">Correo Institucional</label><p class="font-mono text-gray-800">tu.usuario@ucuenca.edu.ec</p></div><div class="bg-black/5 p-4 rounded-xl animated-item" style="animation-delay: 400ms;"><label class="text-sm text-gray-500">Contraseña</label><p class="font-mono text-gray-800">••••••••••</p></div></div></div></div>
                        <!-- Step 6: Save Network -->
                        <div id="step-6" class="step future"><div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center"><h1 class="text-5xl font-black mb-6 animated-item">4. Guarda la Red</h1><p class="text-lg mb-6 text-gray-600 animated-item" style="animation-delay: 100ms;">¡Atención! Después de ingresar tus datos, aparecerá una ventana emergente. Presiona en <span class="font-bold">"Guardar"</span> o <span class="font-bold">"Conectar"</span>.</p><div class="bg-yellow-400/20 text-yellow-800 border-l-4 border-yellow-500 p-4 rounded-r-lg animated-item" style="animation-delay: 200ms;"><p class="font-bold">Paso Crucial</p><p>No omitas esta ventana. Es necesaria para que tu dispositivo recuerde la red.</p></div></div></div>
                        <!-- Step 7: Final Permission -->
                        <div id="step-7" class="step future"><div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center"><h1 class="text-5xl font-black mb-6 animated-item">5. Permiso Final</h1><p class="text-lg mb-6 text-gray-600 animated-item" style="animation-delay: 100ms;">Sal de la aplicación. Es posible que el sistema te pida un último permiso. Debes presionar en <span class="font-bold">"Permitir"</span>.</p><div class="bg-black/5 w-full h-48 rounded-xl flex items-center justify-center animated-item" style="animation-delay: 200ms;"><p class="text-gray-400">Imagen de la ventana de permiso</p></div></div></div>
                        <!-- Step 8: Success -->
                        <div id="step-8" class="step future"><div class="w-full max-w-lg mx-auto p-6 flex flex-col flex-grow justify-center items-center text-center"><div class="text-8xl mb-6 animated-item">🚀</div><h1 class="text-5xl font-black mb-4 animated-item" style="animation-delay: 100ms;">Inicia el Proceso</h1><p class="text-lg text-gray-600 mb-8 animated-item" style="animation-delay: 200ms;">Inicia el proceso de configuración como lo detallamos en esta guía. Si te pierdes, no te preocupes, siempre puedes regresar y volver a ver esta guía.</p><a href="https://play.google.com/store/apps/details?id=app.eduroam.geteduroam" target="_blank" class="block w-full text-center bg-blue-600 text-white font-bold py-4 px-6 rounded-full hover:bg-blue-700 transition text-lg animated-item" style="animation-delay: 300ms;">Instalar geteduroam</a><button onclick="restartGuide()" class="mt-4 text-gray-500 font-bold py-2 px-6 rounded-full hover:bg-black/5 transition animated-item" style="animation-delay: 400ms;">Reiniciar Guía</button></div></div>

                    </div>

                    <!-- Navigation -->
                    <div id="navigation" class="p-4 sm:p-6 mt-auto flex-shrink-0 flex justify-between items-center opacity-0" style="transition: opacity 0.5s;">
                        <button id="back-btn" onclick="navigate(-1)" class="font-bold text-gray-500 py-3 px-4 hover:text-black transition">Atrás</button>
                        <button id="next-btn" onclick="navigate(1)" class="bg-black text-white font-bold py-4 px-10 rounded-full hover:bg-gray-800 transition">Siguiente</button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        const steps = document.querySelectorAll('.step');
        const totalSteps = steps.length - 1; 
        const progressBar = document.getElementById('progress-bar');
        const navigation = document.getElementById('navigation');
        const nextBtn = document.getElementById('next-btn');

        // --- UI Update Functions ---
        function updateUI() {
            steps.forEach((step, index) => {
                step.classList.remove('current', 'past', 'future');
                if (index === currentStep) step.classList.add('current');
                else if (index < currentStep) step.classList.add('past');
                else step.classList.add('future');
            });
            
            const progress = currentStep > 0 ? ((currentStep - 1) / (totalSteps - 2)) * 100 : 0;
            progressBar.style.width = `${Math.min(progress, 100)}%`;

            navigation.style.opacity = (currentStep > 0 && currentStep < totalSteps) ? '1' : '0';
            navigation.style.pointerEvents = (currentStep > 0 && currentStep < totalSteps) ? 'auto' : 'none';
            
            document.getElementById('back-btn').style.visibility = (currentStep <= 1) ? 'hidden' : 'visible';
            nextBtn.textContent = (currentStep === totalSteps - 1) ? 'Finalizar' : 'Siguiente';
        }

        // --- Navigation Functions ---
        function navigate(direction) {
            const newStep = currentStep + direction;
            if (newStep >= 0 && newStep <= totalSteps) {
                currentStep = newStep;
                updateUI();
            }
        }
        
        function startGuide(os) {
            if (os === 'Android') {
                currentStep = 1;
                updateUI();
            } else {
                alert('Guía para ' + os + ' no está disponible aún.');
            }
        }

        function restartGuide() {
            currentStep = 0;
            updateUI();
            // We don't need to run detection again, just show the first step.
        }

        // --- OS Detection and Initial Animation ---
        function getDetectedOS() {
            if (navigator.userAgent.match(/Android/i)) return "Android";
            if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) return "iOS";
            if (navigator.userAgent.match(/Windows/i)) return "Windows";
            if (navigator.userAgent.match(/Mac/i)) return "macOS";
            if (navigator.userAgent.match(/Linux/i)) return "Linux";
            return "Desconocido";
        }

        function getOSLogo(os) {
            switch (os) {
                case "Android": return `<svg class="w-full h-full text-green-500" fill="currentColor" viewBox="0 0 24 24"><path d="M15.2,5.3c0,0-0.3-1.2-1-1.9c-0.8-0.8-2-1-2-1s-1.1,0.1-1.9,0.8C9.5,4,9.1,5,9.1,5c0,0-1.6,0.5-2,2.2c-0.5,1.7-0.1,3.3,0.1,3.9c0.2,0.6,0.4,0.9,0.4,0.9s-0.5,1.2-0.5,1.8c0,0.6,0.5,1.2,0.5,1.2s-0.2,1.7,0.8,2.6c1,1,2.6,0.9,2.6,0.9l0.9-0.9l0.9,0.9c0,0,1.7,0.1,2.6-0.9c1-1,0.8-2.6,0.8-2.6s0.5-0.6,0.5-1.2c0-0.6-0.5-1.8-0.5-1.8s0.2-0.3,0.4-0.9c0.2-0.6,0.5-2.2,0.1-3.9C16.8,5.7,15.2,5.3,15.2,5.3z M12.9,4.4c0.1,0,0.2-0.1,0.2-0.2c0-0.1-0.1-0.2-0.2-0.2c-0.1,0-0.2,0.1-0.2,0.2C12.7,4.3,12.8,4.4,12.9,4.4z M11.1,4.4c0.1,0,0.2-0.1,0.2-0.2c0-0.1-0.1-0.2-0.2-0.2c-0.1,0-0.2,0.1-0.2,0.2C10.9,4.3,11,4.4,11.1,4.4z M12,14.5c-2.2,0-4-1.8-4-4V9.2h8v1.2C16,12.7,14.2,14.5,12,14.5z"/></svg>`;
                case "iOS": return `<svg class="w-full h-full text-gray-800" fill="currentColor" viewBox="0 0 24 24"><path d="M14.2,3.3c-0.2-0.2-0.4-0.4-0.7-0.6c-0.6-0.3-1.2-0.5-1.9-0.5c-0.5,0-1.1,0.1-1.6,0.4C8.9,3,8.4,3.4,8.1,3.9c-1.3,2-1.1,4.9,0.5,6.6c0.3,0.3,0.7,0.6,1.1,0.8c0.5,0.2,1,0.3,1.5,0.3c0.1,0,0.2,0,0.3,0c0.4,0,0.9-0.1,1.3-0.3c0.4-0.2,0.8-0.5,1.1-0.8c-1.4,1.3-2.6,2-3.5,2.1c-0.3,0-0.5,0-0.8,0c-0.8,0-1.5-0.2-2.1-0.5c-0.1,0-0.1,0-0.2,0c-1.2,2,0.2,4.5,0.8,5.4c0.6,0.9,1.4,1.5,2.4,1.5c0.5,0,1-0.2,1.5-0.5c0.6-0.3,1.1-0.8,1.5-1.5c0.1-0.2,0.2-0.4,0.3-0.6c0.4-0.8,0.6-1.6,0.6-2.5c0-0.5-0.1-1-0.2-1.5c-0.2-0.7-0.4-1.2-0.5-1.4c-0.1-0.2-0.1-0.3-0.1-0.3c1.7-1,2.8-3,2.8-5.2C16.8,5.3,15.8,3.9,14.2,3.3z M12.7,2c0.4,0,0.7,0.1,1.1,0.4c0.5,0.4,0.8,1,0.6,1.6c-0.1,0.4-0.4,0.8-0.8,1c-0.4,0.2-0.9,0.2-1.3,0c-0.5-0.4-0.8-1-0.6-1.6C11.8,2.5,12.2,2.1,12.7,2z"/></svg>`;
                case "Windows": return `<svg class="w-full h-full text-blue-500" fill="currentColor" viewBox="0 0 24 24"><path d="M11.4,22.6l12.1-1.8V12h-12.1V22.6z M11.4,11.1V2.3L23.5,1v9.2H11.4z M0.5,12h10V21.7L0.5,20V12z M0.5,11.1V3.1l10-1.4v9.4 H0.5z"/></svg>`;
                default: return `<svg class="w-full h-full text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>`;
            }
        }

        function runInitialAnimation() {
            const os = getDetectedOS();
            const logo = getOSLogo(os);

            setTimeout(() => {
                const splashText = document.getElementById('splash-text');
                const logoContainer = document.getElementById('os-logo-container');
                splashText.parentElement.style.opacity = '0';
                
                setTimeout(() => {
                    splashText.style.display = 'none';
                    logoContainer.innerHTML = logo;
                    logoContainer.parentElement.style.opacity = '1';
                    logoContainer.style.opacity = '1';
                    logoContainer.style.transform = 'scale(1)';
                }, 500)


                setTimeout(() => {
                    document.getElementById('splash-screen').style.opacity = '0';
                    document.getElementById('splash-screen').style.pointerEvents = 'none';
                    document.querySelector('.glass-pane').classList.add('visible');
                    
                    setupGuide(os);
                }, 2000);

            }, 1500);
        }

        function setupGuide(os) {
            document.getElementById('os-info').textContent = `Detectado: ${os}`;
            updateUI();
            if (os === "Android") {
                setTimeout(() => {
                    if (currentStep === 0) startGuide('Android');
                }, 1500);
            }
        }
        
        // --- Parallax Effect ---
        function initParallax() {
            const scene = document.getElementById('parallax-scene');
            const layers = scene.querySelectorAll('.layer');
            const sensitivity = 20;

            const handleMove = (x, y) => {
                const x_axis = -(x - window.innerWidth / 2) / sensitivity;
                const y_axis = -(y - window.innerHeight / 2) / sensitivity;

                layers.forEach(layer => {
                    const depth = layer.getAttribute('data-depth');
                    layer.style.transform = `translate3d(${x_axis * depth}px, ${y_axis * depth}px, 0)`;
                });
            }

            if (window.DeviceOrientationEvent && 'ontouchstart' in window) {
                window.addEventListener('deviceorientation', (event) => {
                    const y = event.beta;  // range [-180, 180]
                    const x = event.gamma; // range [-90, 90]
                    const origin_x = window.innerWidth / 2;
                    const origin_y = window.innerHeight / 2;
                    handleMove(origin_x + x * 5, origin_y + y * 3);
                });
            } else {
                 window.addEventListener('mousemove', (event) => {
                    handleMove(event.clientX, event.clientY);
                });
            }
        }


        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            runInitialAnimation();
            initParallax();
        });
    </script>
</body>
</html>

